<svelte:head>
  <title>example-story</title>
</svelte:head>

<section class="example-story">
  <Adventure
    {story}
    {key}
    title=""
    on:storyEnd="set({ showDecisions: true })"
  />

  {#if showDecisions }
  <nav>
    <Button
      text="Learn about us"
      on:click="redirect('/about')"
    >
      <div slot="icon">
          <Book />
      </div>
    </Button>

    <Button
      text="Become a patron!"
      on:click="redirect('/auth/initiate_login')"
    >
      <div slot="icon">
        <Patreon />
      </div>
    </Button>
  </nav>
  {/if}

</section>

<style>
  .example-story {
    width: 100%;
    flex: 1 0 auto;
    display: flex;
    flex-flow: column;
    justify-content: flex-start;
    align-items: center;
  }

  nav {
    display: flex;
    flex-flow: column;
    align-items: center;
    margin: 0 auto 0 auto;
  }
</style>

<script>
  import exampleStory from './exampleStory.js';
  export default {
    preload({ query: { key} }) {
      return { story: exampleStory, key, };
    },
    methods: {
      redirect(page) {
        window.location = page;
      },
    },
    components: {
      Adventure: '../../components/Adventure.html',
      Button: '../../components/Button.html',
      Patreon: '../../components/icons/Patreon.html',
      Book: '../../components/icons/Book.html',
    }
  };
</script>