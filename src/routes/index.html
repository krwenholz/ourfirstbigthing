<svelte:head>
  <title>Our first big thing</title>
</svelte:head>

<Introduction />

<StoryPreviews {stories} />

<script>
  export default {
    preload({ params, query }) {
      return this.fetch('story.json', { credentials: 'include' }).then((res) => {
        if (res.status === 200) {
          return res.json();
        } else {
          console.error(res);
          this.error(res.status, res);
        }
      }).then((stories) => {
        return { stories };
      });
    },
    components: {
      Introduction: '../components/Introduction.html',
      StoryPreviews: '../components/StoryPreviews.html'
    },
  };
</script>
